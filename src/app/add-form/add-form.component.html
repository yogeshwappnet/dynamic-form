<div class="form-builder">
    <div class="container-fluid">
        <div class="row gx-3">
            <div class="col-lg-8">
                <div class="left-content" dndDropzone (dndDrop)="onDrop($event, form)">
                    <span *ngIf="form?.children?.length < 1" class="info-text">Drag a field from the right to this
                        area</span>
                    <div>
                        <ng-container *ngFor="let item of form?.children; let i = index">
                            <div class="mt-3 fh-out">
                                <div class="form-element rows-bg row-1" *ngIf="item.value == 'row-1'" dndDropzone
                                    (dndDrop)="onDrop($event, item)">
                                    <ng-container *ngFor="let child of item.children">
                                        <ng-container
                                            *ngTemplateOutlet="recursiveList; context: { $implicit: child}"></ng-container>
                                    </ng-container>
                                </div>

                                <div class="action-button align-items-center">
                                    <a href="javascript: void(0)" class="close-icon"><img
                                            src="../../assets/images/close.png" alt=""
                                            (click)="removeItem(i, form.children)"></a>
                                </div>

                                <div class="form-element rows-bg row-2" *ngIf="item.value == 'row-2'" dndDropzone
                                    (dndDrop)="onDrop($event, item)">
                                    <ng-container *ngFor="let child of item.children">
                                        <ng-container
                                            *ngTemplateOutlet="recursiveList; context: { $implicit: child}"></ng-container>
                                    </ng-container>
                                </div>

                                <div class="action-button align-items-center">
                                    <a href="javascript: void(0)" class="close-icon"><img
                                            src="../../assets/images/close.png" alt=""
                                            (click)="removeItem(i,form.children)"></a>
                                </div>

                                <div class="form-element rows-bg row-3" *ngIf="item.value == 'row-3'" dndDropzone
                                    (dndDrop)="onDrop($event, item)">
                                    <ng-container *ngFor="let child of item.children">
                                        <ng-container
                                            *ngTemplateOutlet="recursiveList; context: { $implicit: child}"></ng-container>
                                    </ng-container>
                                </div>

                                <div class="action-button align-items-center">
                                    <a href="javascript: void(0)" class="close-icon"><img
                                            src="../../assets/images/close.png" alt=""
                                            (click)="removeItem(i,form.children)"></a>
                                </div>

                                <ng-container *ngTemplateOutlet="recursiveList; context: { $implicit: item}">
                                </ng-container>

                            </div>
                        </ng-container>
                    </div>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="right-sidebar">
                    <ul>
                        <li *ngFor="let item of componentsList" [dndDraggable]="item" dndEffectAllowed="copy">
                            {{item.name}}</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>


<ng-template let-item #recursiveList>
    <app-paragraph *ngIf="item.value == 'paragraph'"></app-paragraph>
    <app-header *ngIf="item.value == 'header'"></app-header>
    <app-button *ngIf="item.value == 'button'"></app-button>
    <app-checkbox *ngIf="item.value == 'checkbox'"></app-checkbox>
    <app-datepicker *ngIf="item.value == 'datepicker'"></app-datepicker>
    <app-divider *ngIf="item.value == 'divider'"></app-divider>
    <app-input-text *ngIf="item.value == 'input-text'"></app-input-text>
    <app-input-number *ngIf="item.value == 'input-number'"></app-input-number>
    <app-input-email *ngIf="item.value == 'input-email'"></app-input-email>
    <app-select *ngIf="item.value == 'select'"></app-select>
    <app-select-multi *ngIf="item.value == 'select-multi'"></app-select-multi>
    <app-text-area *ngIf="item.value == 'text-area'"></app-text-area>
    <app-radio-button *ngIf="item.value == 'radio-button'"></app-radio-button>
    <app-slide-toggle *ngIf="item.value == 'slide-toggle'"></app-slide-toggle>
    <app-slider *ngIf="item.value == 'slider'"></app-slider>
</ng-template>